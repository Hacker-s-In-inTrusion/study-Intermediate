# 0.  Get Started
HIT에 오신 것을 다시 한 번 환영합니다!

보안이 중요하신 이유는 많이 알고 계실 거라고 생각합니다. 하지만 이를 프로그래밍의 영역에서 관심을 가지는 경우는 흔하지 않습니다. 어떤 경로로 관심을 가지게 되셨나요? 영화? 학업? 등등 많은 이유가 있겠지만 프로그래밍으로 생각을 한다면 많이 막막하실 겁니다.

따라서 여기선 여러분들의 스터디에 도움을 드리기 위해 간단한 동기부여와 함께 세팅 방법을 알려드리려고 합니다.

## Secure Code?
안전한 코드란 무엇일까요? 아무 문제 없이 요구한 동작을 잘 수행하는 코드? 컴파일 에러나 자잘한 버그가 거의 없는 코드? 물론 이런 것들도 답이 될 수는 있겠지만 "안전하다" 라는 느낌이 확실하게 들지 않습니다.

여러 자료를 참고했을 때, 안전한 코드는 이런 조건을 가집니다.

__1. 비정상적인 종료/수행이 없는 코드__  
프로그램이 요구한 작업을 프로세스에 따라 처리하고 잘 마친다면 좋겠지만, 가끔씩 비정상적인 종료나 원하지 않는 작업을 반복하는 경험을 해보신 적이 있으실 겁니다. 특정 이유가 없이 다음과 같은 현상이 발생한다면 안전하다고 볼 수 없을겁니다.

__2. 잘못된 권한 접근/부여가 없는 코드__  
프로그램이 수행 중인데 갑자기 관리자만 접근할 수 있는 곳에 접근하거나 특정 이용자가 다른 이용자에게 위해를 가할 수 있는 여지가 있다면 안전하다고 할 수 없을 겁니다.

__3. 인증된 보안을 사용하지 코드__  
인증된 보안을 사용하지 않는다면 공격하는 사람 입장에선 보안에 쉽게 접근해서 프로그램에 비정상적인 작업을 요구해 프로그램에 위해를 끼칠 수 있습니다. 당연히 이렇게 되면 안되겠죠.

__4. 메모리를 안전하게 다루는 코드__  
메모리는 프로그램에 있어서 매우 중요합니다. 만약 메모리 관리에 신경쓰지 않아 메모리 접근에 오류가 생긴다면 심각한 오류(개발자도 예상치 못한 버그 등)들이 다량으로 발생할 수 있어 위험합니다.

__5. 예외처리를 확실하게 하는 코드__  
모든 경우에 대해 일반적이라고 생각하여 예외처리를 해주지 않는다면, 위에서 언급한 1~4의 문제가 "다시" 발생할 수 있습니다. 결국 여러분들이 한 노력이 수포로 돌아갈 수도 있습니다. 따라서 예외처리도 중요한 과정입니다.

더 많은 조건이 있을 수 있지만, 위의 조건들을 충족한다면 안전하다고 할 수 있겠죠!

## Some Advice!  
처음부터 완벽하게 안전한 코드를 짜는 건 힘듭니다. 어떻게 공격하는 지 모르는데 코드를 짜기 시작할 때부터 들어올 수 있는 공격에 대해 전부 방어하는 건 불가능합니다. 

그렇기 때문에 중급반에서 스터디를 하시면서 공격 기법들에 대해 알아가시면, 프로젝트 단위에서 프로그래밍을 맡으실 때 안전한 코드, Secure Code를 작성하실 수 있으실 겁니다.

----

## Get Started  
이제 중급반을 위한 여정을 시작해보도록 합시다!  

Linux 상에서 이루어지기 때문에 OS의 기반이 Linux면 괜찮지만 아닌 경우에는 (특히 Windows) 몇몇가지 설정을 해줘야 합니다.  
Windows를 쓰시는 분이 다수일 거라 생각하기에, WSL(Windows용 Linux)을 설치하고 필요한 명령어들을 몇몇 알아봅시다.

### WSL 설치
1. 검색에서 Microsoft Store을 검색합니다.

2. Ubuntu라고 검색하시고, 원하시는 버전을 설치합니다. (20.04랑 18.04의 차이는 크게 보면 python2의 사용 가능 여부입니다.)

3. 설치하신 Ubuntu를 누르시고 계정 설정을 완료해주시면 됩니다.

### WSL에서 WSL2로 버전 올리기
1. Microsoft Powershell을 엽니다.

2. 다음의 명령어들을 입력합니다. (재시작이 필요할 수도 있습니다.)
    ```
    dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
    dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
    ```
3. 명령어 ```wsl -l -v``` 를 입력해서 설치한 Linux의 버전을 확인하고 ```wsl --set-version [설치한 Linux 이름] 2``` 를 입력해줍니다.

4. 다시 ```wsl -l -v```를 입력해서 버전이 바뀌었는지 제대로 확인합시다.

설치하실 때 문제가 발생할 수도 있습니다. 그 때는 [이 링크](https://engpro.tistory.com/9)를 참고하시면 해결하실 수 있습니다.

### 라이브러리 설치
리눅스(위에서 라면 우분투겠죠?)를 실행하고 다음 명령어를 차례로 입력해서 라이브러리를 설치합시다.
```
sudo apt update
sudo apt install gcc gdb gcc-multilib g++-multilib
sudo apt install pyhton3
```
밑 2개는 64비트 환경에서 32비트 프로그램을 실행하기 위해 필요한 라이브러리입니다.
```
sudo apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386 zlib1g:i386
sudo dpkg --add-architecture i386
```
이러면 기본 세팅이 완료 됩니다!  
이제 gdb를 이용해 어셈블이 되는지 간단하게 확인해봅시다.

### GDB 사용하기
위에 첨부해드린 test.c를 이용합니다. 다음의 명령어로 컴파일 해 주세요.
```
gcc -o test test.c -m32 -no-pie
```
컴파일이 된 후에 다음과 같이 하시면 됩니다.
```
gdb ./test
```
그러면 gdb 가 실행이 되고 다양한 명령어를 통해 바이너리를 분석할 수 있습니다.
```
gdb)disas main -> 메인 함수 어셈블리 보기
gdb)disas add -> 'add'라는 이름의 함수의 어셈블리 보기
```
gdb에 나오는 어셈블리어 문법을 at&t에서 intel로 바꾸기 위해선 아래와 같이 입력하면 됩니다.
```
gdb)set disassembly-flavor intel
```
----
## CTF and Pwnable.kr
중급반에서 공격기법을 배우고, 이를 적용할 수 있는 좋은 CTF 사이트입니다.  
CTF란 Catch The Flag의 약자로, 프로그램의 취약점을 분석해 목표인 flag를 획득해 점수를 획득하는 방식의 War Game입니다. 여러 공격기법을 배우고 적용하기에 좋은 형식입니다.

pwnable.kr에 접속하시고 회원 가입을 하신 다음에 어떤 방식으로 진행되는지 가장 첫번째 문제인 "fd"를 풀어보시면 CTF의 전반적인 방식이 이해가 되실 겁니다.

추가적으로 pwnable.kr 외에도 많은 CTF 사이트 / 대회가 있습니다!  

🌐 CTF Site  
┣ 🌐  [pwnable.kr](https://pwnable.kr)  
┣ 🌐  [reversing.kr](http://reversing.kr)  
┗ 🌐  [HackCTF](https://ctf.j0n9hyun.xyz/)  

🏆 CTF Competition  
┣ 🏆  Codegate  
┣ 🏆  DEFCON  
┗ 🏆  HITCON  

다양한 곳에서 연습해보시고 도전해보시고 싶으시다면 동아리원분들과 함께 도전하실 수도 있습니다!
